{
  "description": "Test re-branching when conversation returns to an earlier message after reboot",
  "type": "standard",
  "expectedLink": true,
  "parent": {
    "request_id": "19e59e9a-2972-4c72-9c5f-0002252fe0f3",
    "domain": "localhost:3000",
    "conversation_id": "0c2ac5f6-3d4d-4d9d-8f78-e5858b0a0003",
    "branch_id": "main",
    "current_message_hash": "7ef357a4eb2d54fde56222bfc69a9e601fbeb10b342f4ac42a357f4c732753b2",
    "parent_message_hash": null,
    "system_hash": "68f7b080b2445de6eb9829846d12d5e172ad06c70aa5e043886f744b3b08c4f3",
    "body": {
      "model": "claude-opus-4-20250514",
      "stream": true,
      "system": "You are a helpful assistant",
      "messages": [
        {
          "role": "user",
          "content": "hi"
        }
      ],
      "metadata": {
        "user_id": "claude-1"
      },
      "max_tokens": 32000,
      "temperature": 1
    },
    "response_body": {
      "id": "msg_01HRWSPmvRRYhQgem9gsHoTd",
      "role": "assistant",
      "type": "message",
      "model": "claude-opus-4-20250514",
      "usage": {
        "input_tokens": 4,
        "service_tier": "standard",
        "output_tokens": 32,
        "cache_read_input_tokens": 0,
        "cache_creation_input_tokens": 34852
      },
      "content": [
        {
          "text": "Hello! How can I help you today?",
          "type": "text"
        }
      ],
      "stop_reason": "end_turn",
      "stop_sequence": null
    }
  },
  "child": {
    "request_id": "4b42ec94-26c5-4a33-9d2f-b1dcd5275cc4",
    "domain": "localhost:3000",
    "body": {
      "model": "claude-opus-4-20250514",
      "stream": true,
      "system": "You are a helpful assistant",
      "messages": [
        {
          "role": "user",
          "content": "hi"
        },
        {
          "role": "assistant",
          "content": [
            {
              "text": "Hello! How can I help you today?",
              "type": "text",
              "cache_control": {
                "type": "ephemeral"
              }
            }
          ]
        },
        {
          "role": "user",
          "content": "after reboot"
        }
      ],
      "metadata": {
        "user_id": "claude-1"
      },
      "max_tokens": 32000,
      "temperature": 1
    }
  }
}
