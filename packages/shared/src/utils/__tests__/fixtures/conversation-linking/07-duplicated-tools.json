{
  "description": "Test that duplicated tool_use blocks (same ID) are handled correctly in conversation linking",
  "type": "standard",
  "expectedLink": true,
  "parent": {
    "request_id": "parent-request-id",
    "domain": "test.example.com",
    "conversation_id": "test-conversation-id",
    "branch_id": "main",
    "current_message_hash": "7ef357a4eb2d54fde56222bfc69a9e601fbeb10b342f4ac42a357f4c732753b2",
    "parent_message_hash": null,
    "system_hash": "68f7b080b2445de6eb9829846d12d5e172ad06c70aa5e043886f744b3b08c4f3",
    "body": {
      "system": "You are a helpful assistant.",
      "messages": [
        {
          "role": "user",
          "content": "Please read a file"
        }
      ]
    },
    "response_body": {
      "content": [
        {
          "text": "I'll read that file for you.",
          "type": "text"
        },
        {
          "id": "tool_123",
          "name": "read_file",
          "type": "tool_use",
          "input": { "path": "/test/file.txt" }
        }
      ]
    }
  },
  "child": {
    "request_id": "child-request-id",
    "domain": "test.example.com",
    "body": {
      "system": "You are a helpful assistant.",
      "messages": [
        {
          "role": "user",
          "content": "Please read a file"
        },
        {
          "role": "assistant",
          "content": [
            {
              "text": "I'll read that file for you.",
              "type": "text"
            },
            {
              "id": "tool_123",
              "name": "read_file",
              "type": "tool_use",
              "input": { "path": "/test/file.txt" }
            }
          ]
        },
        {
          "role": "user",
          "content": [
            {
              "type": "tool_result",
              "content": "File contents here",
              "tool_use_id": "tool_123"
            }
          ]
        },
        {
          "role": "assistant",
          "content": [
            {
              "text": "The file contains the requested data.",
              "type": "text"
            },
            {
              "id": "tool_123",
              "name": "read_file",
              "type": "tool_use",
              "input": { "path": "/test/file.txt" }
            }
          ]
        },
        {
          "role": "user",
          "content": [
            {
              "type": "tool_result",
              "content": "File contents here",
              "tool_use_id": "tool_123"
            }
          ]
        }
      ]
    }
  }
}
