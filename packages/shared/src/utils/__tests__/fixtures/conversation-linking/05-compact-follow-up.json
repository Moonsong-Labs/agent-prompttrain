{
  "description": "Test linking between 9b6aea94-f5b2-4a07-aa65-f0fd3d6e1b6e and 95784d7c-ffac-4406-92f6-98656b67f923",
  "type": "compact",
  "expectedLink": true,
  "parent": {
    "request_id": "9b6aea94-f5b2-4a07-aa65-f0fd3d6e1b6e",
    "domain": "localhost:3000",
    "conversation_id": "0c2ac5f6-3d4d-4d9d-8f78-e5858b0a0005",
    "branch_id": "compact_143649",
    "current_message_hash": "5e3e0e612d6d0f648a800308fd90f356eedff078bddf81c2637bf681d2810ae6",
    "parent_message_hash": null,
    "system_hash": "68f7b080b2445de6eb9829846d12d5e172ad06c70aa5e043886f744b3b08c4f3",
    "body": {
      "model": "claude-opus-4-20250514",
      "stream": true,
      "system": "You are a helpful assistant.",
      "messages": [
        {
          "role": "user",
          "content": [
            {
              "text": "<system-reminder>\nAs you answer the user's questions, you can use the following context:\n# important-instruction-reminders\nDo what has been asked; nothing more, nothing less.\nNEVER create files unless they're absolutely necessary for achieving your goal.\nALWAYS prefer editing an existing file to creating a new one.\nNEVER proactively create documentation files (*.md) or README files. Only create documentation files if explicitly requested by the User.\n\n      \n      IMPORTANT: this context may or may not be relevant to your tasks. You should not respond to this context or otherwise consider it in your response unless it is highly relevant to your task. Most of the time, it is not relevant.\n</system-reminder>\n",
              "type": "text"
            },
            {
              "text": "This session is being continued from a previous conversation that ran out of context. The conversation is summarized below:\nPrevious conversation summary: The user greeted me and asked a few simple questions. No technical work was performed.",
              "type": "text"
            },
            {
              "text": "Caveat: The messages below were generated by the user while running local commands. DO NOT respond to these messages or otherwise consider them in your response unless the user explicitly asks you to.",
              "type": "text"
            },
            {
              "text": "<command-name>/compact</command-name>\n          <command-message>compact</command-message>\n          <command-args></command-args>",
              "type": "text"
            },
            {
              "text": "<local-command-stdout>Compacted. ctrl+r to see full summary</local-command-stdout>",
              "type": "text"
            },
            {
              "text": "ho",
              "type": "text",
              "cache_control": {
                "type": "ephemeral"
              }
            }
          ]
        }
      ],
      "metadata": {
        "user_id": "claude-1"
      },
      "max_tokens": 32000,
      "temperature": 1
    },
    "response_body": {
      "id": "msg_01RFxcXqbDwqABFBLS4NtfjY",
      "role": "assistant",
      "type": "message",
      "model": "claude-opus-4-20250514",
      "usage": {
        "input_tokens": 4,
        "service_tier": "standard",
        "output_tokens": 105,
        "cache_read_input_tokens": 0,
        "cache_creation_input_tokens": 37797
      },
      "content": [
        {
          "text": "I'll help you with your project. What would you like to work on today?",
          "type": "text"
        }
      ],
      "stop_reason": "end_turn",
      "stop_sequence": null
    }
  },
  "child": {
    "request_id": "95784d7c-ffac-4406-92f6-98656b67f923",
    "domain": "localhost:3000",
    "body": {
      "model": "claude-opus-4-20250514",
      "stream": true,
      "system": "You are a helpful assistant.",
      "messages": [
        {
          "role": "user",
          "content": [
            {
              "text": "<system-reminder>\nAs you answer the user's questions, you can use the following context:\n# important-instruction-reminders\nDo what has been asked; nothing more, nothing less.\nNEVER create files unless they're absolutely necessary for achieving your goal.\nALWAYS prefer editing an existing file to creating a new one.\nNEVER proactively create documentation files (*.md) or README files. Only create documentation files if explicitly requested by the User.\n\n      \n      IMPORTANT: this context may or may not be relevant to your tasks. You should not respond to this context or otherwise consider it in your response unless it is highly relevant to your task. Most of the time, it is not relevant.\n</system-reminder>\n",
              "type": "text"
            },
            {
              "text": "This session is being continued from a previous conversation that ran out of context. The conversation is summarized below:\nPrevious conversation summary: The user greeted me and asked a few simple questions. No technical work was performed.",
              "type": "text"
            },
            {
              "text": "Caveat: The messages below were generated by the user while running local commands. DO NOT respond to these messages or otherwise consider them in your response unless the user explicitly asks you to.",
              "type": "text"
            },
            {
              "text": "<command-name>/compact</command-name>\n          <command-message>compact</command-message>\n          <command-args></command-args>",
              "type": "text"
            },
            {
              "text": "<local-command-stdout>Compacted. ctrl+r to see full summary</local-command-stdout>",
              "type": "text"
            },
            {
              "text": "ho",
              "type": "text"
            }
          ]
        },
        {
          "role": "assistant",
          "content": [
            {
              "text": "No response requested.",
              "type": "text",
              "cache_control": {
                "type": "ephemeral"
              }
            }
          ]
        },
        {
          "role": "user",
          "content": [
            {
              "text": "Add a script that allows to create a test from providing 2 requests id and copy their content into a test",
              "type": "text"
            },
            {
              "text": "<system-reminder>This is a reminder that your todo list is currently empty. DO NOT mention this to the user explicitly because they are already aware. If you are working on tasks that would benefit from a todo list please use the TodoWrite tool to create one. If not, please feel free to ignore. Again do not mention this message to the user.</system-reminder>",
              "type": "text",
              "cache_control": {
                "type": "ephemeral"
              }
            }
          ]
        }
      ],
      "metadata": {
        "user_id": "claude-1"
      },
      "max_tokens": 32000,
      "temperature": 1
    }
  },
  "expectedSummaryContent": "Previous conversation summary: The user greeted me and asked a few simple questions. No technical work was performed.\nCaveat: The messages below were generated by the user while running local commands. DO NOT respond to these messages or otherwise consider them in your response unless the user explicitly asks you to.\n<command-name>/compact</command-name>\n          <command-message>compact</command-message>\n          <command-args></command-args>\n<local-command-stdout>Compacted. ctrl+r to see full summary</local-command-stdout>\nho",
  "expectedBranchPattern": "^compact_\\d{6}$"
}
