{
  "description": "Compact conversation - resuming from context overflow",
  "type": "compact",
  "expectedLink": true,
  "expectedSummaryContent": "implementing a dual hash system",
  "expectedBranchPattern": "^compact_\\d{6}$",
  "parent": {
    "request_id": "parent-uuid-2",
    "domain": "test.com",
    "conversation_id": "conv-uuid-2",
    "branch_id": "main",
    "current_message_hash": "parent-hash-abc123",
    "parent_message_hash": "grandparent-hash",
    "system_hash": "system-hash-xyz789",
    "body": {
      "messages": [
        {
          "role": "user",
          "content": "I want to better support detecting the conversation links between requests."
        },
        {
          "role": "assistant",
          "content": "I'll help you implement a dual hash system to improve conversation link detection."
        }
      ],
      "system": "You are a helpful coding assistant"
    },
    "response_body": {
      "content": [
        {
          "text": "I've analyzed the conversation and understand that you want to implement a dual hash system for better conversation link detection. The key issue is that system prompt changes (like git status updates in Claude Code) are breaking conversation linking. I'll help you implement this solution.",
          "type": "text"
        }
      ]
    }
  },
  "child": {
    "request_id": "child-uuid-2",
    "domain": "test.com",
    "body": {
      "messages": [
        {
          "role": "user",
          "content": "This session is being continued from a previous conversation that ran out of context. The conversation is summarized below: The user requested implementing a dual hash system to improve conversation link detection by splitting system prompts and message content into separate hashes."
        }
      ],
      "system": "You are a helpful coding assistant with updated git status"
    }
  }
}
